'''
Given a string containing just the characters '(', ')', '{', '}', '[' and ']', determine
if the input string is valid.
The brackets must close in the correct order, "()" and "()[]{}" are all valid but "(]" 
and "([)]" are not.
'''

def balancedParan(str):
	lookup={'(':')','[':']','{':'}'}
	stack=[]
	flag=False
	if len(str)==0:
		flag=True
	for i in str:
		if i in ['(','[','{']:
			stack.append(i)
		elif i in [')',']','}']:
			if len(stack)==0:
				
				flag=False
				break
			else:
				e=stack.pop()
				if lookup.get(e)!=i:
					
					flag=False
					break
				else:
					flag=True
	
	if flag:
		return 'YES'
	else:
		return 'NO'
	
print balancedParan('[()][{}()][](){}([{}(())([[{}]])][])[]([][])(){}{{}{[](){}}}()[]({})[{}{{}([{}][])}]')
print balancedParan('[()][{}[{}[{}]]][]{}[]{}[]{{}({}(){({{}{}[([[]][[]])()]})({}{{}})})}')
print balancedParan('(])[{{{][)[)])(]){(}))[{(})][[{)(}){[(]})[[{}(])}({)(}[[()}{}}]{}{}}()}{({}](]{{[}}(([{]')
print balancedParan('){[]()})}}]{}[}}})}{]{](]](()][{))])(}]}))(}[}{{)}{[[}[]')
print balancedParan('}(]}){')
print balancedParan('((]()(]([({]}({[)){}}[}({[{])(]{()[]}}{)}}]]{({)[}{(')
print balancedParan('{}{({{}})}[][{{}}]{}{}(){{}[]}{}([[][{}]]())')
print balancedParan('(){}[()[][]]{}(())()[[([])][()]{}{}(({}[]()))()[()[{()}]][]]')
print balancedParan('()([]({}[]){}){}{()}[]{}[]()(()([[]]()))()()()[]()(){{}}()({[{}][]}[[{{}({({({})})})}]])')
print balancedParan('[]([{][][)(])}()([}[}(})}])}))]](}{}})[]({{}}))[])(}}[[{]{}]()[(][])}({]{}[[))[[}[}{(]})()){{(]]){][')
print balancedParan('{()({}[[{}]]()(){[{{}{[[{}]{}((({[]}{}()[])))]((()()))}(()[[[]]])((()[[](({([])()}))[]]))}]})}')
print balancedParan('()(){{}}[()()]{}{}')
print balancedParan('{}()([[]])({}){({[][[][[()]]{{}[[]()]}]})}[](())((())[{{}}])')
print balancedParan('{}(((){}){[]{{()()}}()})[]{{()}{(){()(){}}}}{()}({()(()({}{}()((()((([])){[][{()}{}]})))))})')
print balancedParan('][[{)())))}[)}}}}[{){}()]([][]){{{{{[)}]]{([{)()][({}[){]({{')
print balancedParan('{{}(')
print balancedParan('{[{((({}{({({()})()})[]({()[[][][]]}){}}))){}}]}{}{({((){{}[][]{}[][]{}}[{}])(())}[][])}')
print balancedParan('()[[][()[]][]()](([[[(){()[[]](([]))}]]]))')
print balancedParan('()[]({}{})(()){{{}}()()}({[]()}())[](){}(({()}[{}[{({{}}){({}){({})((({()})))}}}]]))')
print balancedParan('}[{){({}({)})]([}{[}}{[(([])[(}){[]])([]]}(]]]]{][')
print balancedParan('[{]{[{(){[}{}(([(]}])(){[[}(]){(})))}}{{)}}{}][({(}))]}({)')
print balancedParan(')})[(]{][[())]{[]{{}}[)[)}[]){}](}({](}}}[}{({()]]')
print balancedParan('[[[({[]}({[][[[[][[{(()[][])}()[][]][]{}]]]]}))][(()){}]]]()[{}([]{}){}{{}}]')
print balancedParan('({[]({[]})}())[][{}[{{(({{{([{}])}}}))}}]]')
print balancedParan('([((()))()])[][][]{}()(([]))[]()[]((){}[]){}(){{}[]}[[{[]}]]')
print balancedParan('[[(((({}{[]{}()}){}{{}}){({[]{[{}]{(){}(((){()}))}()}}[[]]()()[()])[[{}{}]()]}))]]{}[]{}({({{}})})')
print balancedParan('(]{()}((')
print balancedParan('[][(())[({{{()[]}}{[[][[][[[]{{{[()]{{{{}{[]}[][]}}}}}}]]]]}})]]')
print balancedParan('}[})})}[)]{}{)')
print balancedParan('({(}{})))}(}[)[}{)}}[)[{][{(}{{}]({}{[(})[{[({{[}{(]]})}')
print balancedParan(']}})[]))]{][])[}(])]({[]}[]([)')
print balancedParan('[{{}{[{{[}[[}([]')
print balancedParan('[([]){}][({})({[(([])[][])][[{}{([{{}{(()){{{({}{{}}())}}[]}}()[()[{{{([](()){[[[]]]})}}}]]}])}]]})]')
print balancedParan(']{}{(}))}](})[{]]()(]([}]([}][}{]{[])}{{{]([][()){{})[{({{{[}{}](]}}')
print balancedParan('{[{}}){(}[][)(}[}][)({[[{]}[(()[}}){}{)([)]}(()))]{)(}}}][')
print balancedParan('(]{}{(}}}[)[')
print balancedParan('[]{}{[[]]}([{}]{}[]){{(())}}')
print balancedParan('[)([{(][(){)[)}{)]]}}([((][[}}(]{}]]}]][(({{{))[[){}{]][))[]{]][)[{{}{()]){)])))){{{[(]}[}}{}]')
print balancedParan('{({(){[[[][]{}[[([]{})]{}]][[]()()]]}})}[{}{{}}]')
print balancedParan(')}][(})){))[{}[}')
print balancedParan('{[]{({]}[}}[{([([)([){{}{(}}[]}}[[{[}[[()(])[}[]')
print balancedParan('()()()[]')
print balancedParan('((){}])][]][}{]{)]]}][{]}[)(])[}[({(')
print balancedParan(')[((])(]]]]((]){{{{())]}]}(}{([}(({}]])[[{){[}]{{}})[){(')
print balancedParan('}][[{[((}{[]){}}[[[)({[)}]]}(]]{[)[]}{}(){}}][{()]))})]][(((}}')
print balancedParan('([]){}{{}{}}()([([{}{[[]()([(([]()))()[[]]])]}])])')
print balancedParan('[()[[]{{[]}()([])}[]][][]][]()[]{}{}[][]{}{}[()(){}]')
print balancedParan('{[{){]({(((({](]{([])([{{([])[}(){(]](]{[{[]}}())[){})}))[{})))[')
print balancedParan('{}[()[]][]{}{}[[{{[[({})]()[[()]]]}}]]')
print balancedParan('{[{}[][]]}[((()))][]({})[]{}{()}')
print balancedParan('(){[{({})}]}')
print balancedParan('([]])][{)]({)[]))}]())[}]))][}{(}}})){]}]{[)}(][})[[')
print balancedParan('((({{}(([{}(())]))[()]{[[[]()]]}})))')
print balancedParan('}()))}(}]]{{})}][{](]][{]{[[]]]}]]}([)({([))[[(]}])}[}(([{)[)]]([[](]}]}{]{{})[]){]}{])(')
print balancedParan('{}{}{}{[[()]][]}')
print balancedParan(')]}]({{})[[[{]{{{}}][))]{{')
print balancedParan('))){({}])}])}}]{)()(}(]}([')
print balancedParan('([[]][])[[]()][]()(([[]]{[()[]{[][{}]}[()]]{}{[]}}{{}()}(()[([][]{})[[{}][]]{}[]])))')
print balancedParan('(]{[({}[){)))}]{[{}][({[({[]))}[}]}{()(([]{]()}})}[]{[)](((]]])([]}}]){)(([]]}[[}[')
print balancedParan('([[]])({}(([(){{}[{}]}]){[{}]}))[][{}{}](){}')
print balancedParan('[][][][][][([])][]{({()}[[()()]{([(){[]{}}{(())}{[](){}()({}())}[({}[[]()])][]])}])}')
print balancedParan('}[{{(}})}}(((())()({]{([]((][(({)[({[]]}[])}]{][{{}]{)][}(])}}}))}}}')
print balancedParan('[]({})()[]{}{}[]({}{})[]{([])()[()][{()({})[{}{[[()]{}[]][]}(({{[]{()()()}{}[]()}[]}){{}{}})]}]}')
print balancedParan('{{(([{)]{}({][{](){({([[[][)}[)})(')
print balancedParan('[{}]{[()({[{}]})]}')
print balancedParan('[[{}]]')
print balancedParan(']{{({[{]}[[)]]}{}))}{){({]]}{]([)({{[]){)]{}){){}()})(]]{{])(])[]}][[()()}')
print balancedParan('{[([}[[{{(]]][}()())]{){(){)]]){})}]{][][(}[]())[}[)})})[][{[)[})()][]))}[[}')
print balancedParan(']()])}[}}}{]]{)[}(}]]])])}{(}{([{]({)]}])(})[{}[)]])]}[]{{)){}{()}]}((}}{({])[}])[]}')
print balancedParan('(]}[{}{{][}))){{{([)([[])([]{[')
print balancedParan('{(()[]){}}(){[]}({{}(()())})([]){}{}(())()[()]{}()')
print balancedParan('{{}[{}[{}[]]]}{}({{[]}})[[(){}][]]{}(([]{[][]()()}{{{()()}{[]}({}[]{()})}{()}[[]][()]}))')
print balancedParan('{[][]}[{}[](){}]{{}{[][{}]}}')
print balancedParan('()(){}(){((){}[])([[]]())}')
print balancedParan('{}[[{[((}[(}[[]{{]([(}]][[')
print balancedParan('{}[([{[{{}()}]{}}([[{}[]]({}{{()}[][][]})])])]')
print balancedParan('{[](}([)(])[]]})()]){[({]}{{{)({}(][{{[}}(]{')
print balancedParan('[][]{{}[](())}{}({[()]}())[][[][({}([{}]))]]')
print balancedParan('((()))[]{[(()({[()({[]}{})]}))]}{[]}{{({}{})[{}{}]{()([()])[{()}()[[]{}()]{}{}[]()]}[[]{[]}([])]}}')
				
	